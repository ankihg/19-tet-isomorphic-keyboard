<!-- http://ankihg.ucoz.com/index/19_edo_iso_keyboard/0-81 -->
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>AnkiHg - 19edo isomorphic keyboard</title>

</head>
<body class="t-body" ><div class="b-main t-container clearfix"><div class="b-maincontent b-white" role="main"><div class="content-padding"><div id="nativeroll_video_cont" style="display:none;"></div>
    <script>
        window.adb_site_type = 'ucoz';
        window.adb_showcrit = 0 ;
        window.adb_abandoned = 1 ;
        //window.ucoz_site_type = 'ucoz' ;
        window.adb_site_cat = '24' ;
    </script>
    <script id="crt_adb_place" type="text/javascript" src="/.s/src/crit_image.js?v=5" async></script>
    <!DOCTYPE html>
    <head>
        <style>

            h1 {
                text-align: center;
                color: white;
            }

            #ntet {
                position: absolute;
                left: 5%;
                top: 60%;
                width: 40%;
                color: white;
            }

            #ntet h1 {
                font-size: 100%;
                font-weight: bold;
                text-align: center;
            }

            #iso {
                position: absolute;
                left: 55%;
                top: 60%;
                width: 40%;
                color: white;
            }

            #iso h1 {
                font-size: 100%;
                font-weight: bold;
                text-align: center;
            }

            #p {
                font-size: 100%;
            }

            a {
                color: white;
            }

        </style>
        <script type="text/javascript" src="/.s/src/jquery-1.10.2.js"></script>


        <link type="text/css" rel="stylesheet" href="/.s/src/social.css" />
    </head>
    <html>
    <body bgcolor="#000000">

        <h1>NINETEEN TONE EQUAL TEMPERAMENT ISOMORPHIC KEYBOARD</h1>

        <div id='keyboardWrap' style="border:1px width=100% height=100%">
            HELLO WORLD
        </div>

        <div id="ntet">
            <h1>NINETEEN TONE EQUAL TEMPERAMENT</h1>
            <p>the octave is divided into nineteen steps of equal frequency ratio. read on... </p>
            <p>&nbsp;&nbsp; <a href="https://en.wikipedia.org/wiki/19_equal_temperament" target="_blank" >Wikipedia - 19 equal temperament</a> </p>
            <p>&nbsp;&nbsp; <a href="http://www.math.uwaterloo.ca/~mrubinst/tuning/12.html" target="_blank" >Why 12 notes to the Octave?</a> </p>
            <p>&nbsp;&nbsp; <a href="http://academo.org/demos/19-tet-keyboard/" target="_blank" >19 TET Keyboard</a> </p>
        </div>

        <div id="iso">
            <h1>ISOMORPHIC KEYBOARD</h1>
            <p>musical input device where intervals appear in uniform shapes throughout keys. read on... </p>
            <p>&nbsp;&nbsp; <a href="https://en.wikipedia.org/wiki/Isomorphic_keyboard" target="_blank" >Wikipedia - Isomorphic keyboard</a> </p>
            <p>&nbsp;&nbsp; <a href="http://www.qwertonic.com/?page_id=2" target="_blank" >The Qwertonic Keyboard</a> </p>
        </div>


        <script>
            //****** SET UP *******
            var keyboardWrap = document.getElementById('keyboardWrap');
            var clientRect = keyboardWrap.getBoundingClientRect();

            //**MUSIC
            //root C1
            var rootPitchIndex = 0; //C
            var rootOctave = 1;
            var rootFreq = 32.70;

            //tone set
            //var pitches = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
            var pitches = ['C', 'C#', 'Db', 'D', 'D#', 'Eb', 'E', 'E#', 'F', 'F#', 'Gb', 'G', 'G#', 'Ab', 'A', 'A#', 'Bb', 'B', 'B#'];
            var nTones = pitches.length;
            //*

            function setUp() {
                initKeyboardWrap();
                drawKeyboardTable();

                //alert('setup complete');
            };

            function initKeyboardWrap() {
                keyboardWrap = document.getElementById('keyboardWrap');
                if (keyboardWrap == null) {
                    keyboardWrap = document.createElement('div');
                    keyboardWrap.id = 'keyboardWrap';
                }

                keyboardWrap.style.left = 0;
                keyboardWrap.style.top = 0;
                keyboardWrap.style.width = clientRect.width;
                keyboardWrap.style.height = clientRect.height;

            };

            function drawKeyboardTable() {
                //keyboardWrap.innerHTML = 'PLZ RESPOND';

                var nOctaves = 3;

                var html = "<table>";

                    var pitchIndex = 0;
                    var startOctave = 3;
                    for (var nO=1; nO<=2*nOctaves; nO++) {
                        var octave = Math.ceil(nO/2);
                        html = html.concat("<tr>");
                            for (var pI = 0; pI < 10; pI=pI+1) {

                                /*var oct = octave;
                                if (nO%2==0) { //shift fifth for alternating rows
                                //pitchIndex = (pI + 7)%pitches.length;
                                pitchIndex = (pI + 8)%pitches.length;
                                oct = octave + Math.floor((pI + 8)/pitches.length);
                            } */

                            var pitch = pitches[pitchIndex%pitches.length];
                            octave = startOctave + Math.floor(pitchIndex/pitches.length);
                            pitchIndex++;

                            if (nO%2==1) {
                                html += '<td bgcolor="#0000ff"><h2> </h2></td>';
                            }

                            var note = "'".concat(pitch.concat(octave), "'");
                            html += '<td bgcolor="#ffffff" onClick="play('.concat(note, ');"><h2>', note, '</h2></td>');

                            if (nO%2==0) {
                                html += '<td bgcolor="#0000ff"><h2> </h2></td>';
                            }
                        }
                        html+= '</tr>';

                        keyboardWrap.innerHTML = html;
                    };


                    keyboardWrap.innerHTML += "</table>";
                };

                document.addEventListener('keydown', function(event) {
                    /* var keyChars = ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'J', 'K', 'L', ';', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', ',', '.', '/'];*/
                    var keyCodes = [81, 87, 69, 82, 84, 89, 85, 73, 79, 80, 65, 83, 68, 70, 71, 72, 74, 75, 76, 186, 90, 88, 67, 86, 66, 78, 77, 188, 190, 191];


                    //var char = String.fromCharCode(event.keyCode);
                    var keyCode = event.keyCode;

                    for (var i=0; i<keyCodes.length; i++) {
                        if (keyCodes[i] == keyCode) {
                            var startOctave = 3;
                            var octave = startOctave + Math.floor(i/pitches.length);
                            var pitch = pitches[i%pitches.length];
                            var note = pitch.concat(octave);

                            play(note);

                            break;
                        }
                    }

                });

                setUp();

                //****** MUSIC *******

                function play(noteName) {
                    var freq = noteNameToFrequency(noteName);
                    //alert(freq);

                    //alert('get it');
                    if (! window.AudioContext) {
                        if (! window.webkitAudioContext) {
                            bad_browser();
                            return;
                        }
                        window.AudioContext = window.webkitAudioContext;
                    }

                    var context = new AudioContext();
                    // var context = new window.webkitAudioContext();

                    //alert(context);
                    var osc = context.createOscillator();
                    osc.frequency.value = freq;
                    osc.connect(context.destination);
                    osc.type = "sawtooth";
                    osc.start(0);
                    osc.stop(.3);

                    osc.onended = function() {
                        context.close();

                        highlightNoteOnScreen(noteName);
                    };

                    /*var gain = context.createGain();
                    gain.gain.value = 100;
                    gain.connect(osc.frequency);*/
                };

                function noteNameToFrequency(noteName) {
                    var pattern = /(\D+)(\d)/g;
                    var match = pattern.exec(noteName);

                    var pitch = match[1];
                    var octave = parseInt(match[2]);

                    var rootInterval = findIntervalFromRoot(pitch, octave);

                    var freq = findFreqFromRootInterval(rootInterval);
                    return freq;
                };

                function findIntervalFromRoot(pitch, octave) {
                    //returns interval in cents

                    var pitchIndex = findPitchIndex(pitches, pitch);
                    var pitchDif = pitchIndex - rootPitchIndex;

                    var octaveDif = octave - rootOctave;
                    var dif = nTones*octaveDif + pitchDif;

                    var interval = dif * (1200/nTones);
                    return interval;
                };

                function findPitchIndex(pitches, pitch) {
                    for (var i=0; i<pitches.length; i++) {
                        if (pitches[i] == pitch) {
                            return i;
                        }
                    }
                    return -1;
                };

                function findFreqFromRootInterval(rootInterval) {
                    var freq = rootFreq * Math.pow(2, rootInterval/1200);
                    return freq;
                };

                //******* VISUAL ********
                function highlightNoteOnScreen(note) {
                    var html = keyboardWrap.innerHTML;
                    note = "'".concat(note, "'");
                    //var pattern = '<td bgcolor="#00FF00" onClick="play('.concat(note, ');"');
                    //var pattern = <td bgcolor="#00FF00" onclick="play('A3');">
                    //alert(pattern);
                    //alert(html);
                    //var re = new RegExp('<td bgcolor="#00FF00" onClick="play('.concat(note, ');">'),"g");
                    // var match = re.exec(html);
                    //alert(match);
                    //for (var i=0; i<match.length; i++) {
                    //alert(match[i]);
                    //}
                    html = html.replace(/<td bgcolor="#00FF00" onclick="play('A3');">/, '<td bgcolor="#00FFFF" onClick="play('.concat(note, ');">'));
                        //alert('donw');
                        //html = html.replace(re, 'bgcolor="#00FFFF"');


                        keyboardWrap.innerHTML = html;
                        //alert('highlighted');
                    };

                </script>

            </body>
            </html><!-- </body> -->
        </div>
    </div>
    <div class="sidebar-clear clearleft"></div>
    <aside class="b-sidebar b-white clearfix"><span style="font-size: 0.875em; line-height: 1.429; background-color: initial;"><!-- "' --><span class="pbMww95w"><a href="https://www.ucoz.com/" target="_blank" rel="nofollow">uCoz</a></span></span></aside></div></body></html><div id="utbr8214" rel="s102"></div>
    <!-- 0.05457 (s102) -->
